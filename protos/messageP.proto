syntax = "proto3";
package protobuf;

service CharacterService {
    rpc GetSymbols (Identifier) returns (stream Message) {}
    rpc Connect (UserR) returns (Identifier) {}
    rpc Register (UserR) returns (Empty) {}
    rpc Login (UserL) returns (Identifier) {}

    rpc GetFilesDescription (Identifier) returns (FileDescriptionList) {}
    rpc getFileContent (FileDescription) returns (stream FileChunk) {}
}

message Empty {
}

message Message {
    int32 idEditor = 1;
    Symbol symbol = 2;
    bool isEraseBool = 3;
}

message Symbol {
    string character = 4;
    int32 uniqueId = 5;
    repeated int32 pos = 6;
}

message UserR {
    string username = 7;
    string password = 15;
    string passwordR = 16;
}
message UserL {
    string username = 17;
    string password = 18;
}

message Identifier {
    int32 editorId = 8;
}

message FileDescriptionList {
    repeated FileDescription fileDL = 9;
}

message FileDescription {
    string name = 10;
    int32 size = 11;
    string userO = 12; //email Owner
    repeated string userAL = 13; //userAccessList
}

message FileChunk{
    bytes file = 14;
}

syntax = "proto3";
package protobuf;

service CharacterService {
    rpc Register (UserR) returns (Empty) {}
    rpc Login (UserL) returns (Identifier) {}
    rpc Logout (Empty) returns (Empty) {}

    rpc InsertFile (FileName) returns (Empty) {}
    rpc DeleteFile (FileName) returns (Empty) {}
    rpc GetFiles (Empty) returns (FilesInfoList) {}
    rpc GetFileContent (FileInfo) returns (stream Chunk) {}
    rpc GetSymbols (stream FileInfo) returns (stream Message) {}
    rpc InsertSymbols (stream Message) returns (Empty) {}
}

message Empty {}

message Identifier {
    string token = 17;
}

message FileName {
    string fileName = 30;
}

message Chunk {
    bytes chunk = 19;
}

message UserR {
    string username = 1;
    string password = 2;
    string passwordR = 3;
}
message UserL {
    string username = 4;
    string password = 5;
}

message FilesInfoList {
    repeated FileInfo fileIL = 6;
}

message FileInfo {
    string filename = 7;
    int32 size = 8;
    string usernameO = 9; //email Owner
    repeated string usernamesAL = 10; //userAccessList
}

message Message {
    FileInfo fileInfo = 22;
    bool isEraseBool = 13;
    Symbol symbol = 12;
}

message Symbol {
    string character = 14;
    string uniqueId = 15;
    repeated int32 pos = 16;
}

message UserMap{
    map<string,string> userMap = 20;
}






